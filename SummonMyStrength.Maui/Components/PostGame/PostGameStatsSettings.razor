@using SummonMyStrength.Api.PostGame.Stats
@using SummonMyStrength.Maui.Data
@inject IUserSettingsService UserSettingsService

<MudGrid Justify="Justify.Center" Style="align-items: center">
    <MudItem xs="5">
        <MudText Typo="Typo.subtitle2">Skip Post-Game Stats Screen?</MudText>
    </MudItem>
    <MudItem>
        <MudSwitch T="bool" Color="Color.Success" Class="mr-0" Value="_userSettings.SkipPostGameStatsScreen" ValueChanged="SkipPostGameStatsScreenChangedAsync" />
    </MudItem>
</MudGrid>

@code {
    private UserSettings _userSettings;

    [Parameter]
    public PostGameStatInfo[] StatReaders { get; set; }

    protected override async Task OnInitializedAsync()
    {
        _userSettings = await UserSettingsService.GetSettingsAsync();
    }

    private async Task SkipPostGameStatsScreenChangedAsync(bool newValue)
    {
        _userSettings.SkipPostGameStatsScreen = newValue;
        await UserSettingsService.SaveSettingsAsync();
    }
}